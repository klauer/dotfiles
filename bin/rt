#!/bin/bash

if [ -f "run_tests.py" ]; then
    coverage run --concurrency=thread --parallel-mode run_tests.py "$@"
else
    coverage run --concurrency=thread --parallel-mode -m pytest "$@"
fi

# (coverage combine && coverage report | grep -v -e ' 0%') || /usr/bin/true
coverage combine || /usr/bin/true
